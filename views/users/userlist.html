<style>
    .user-list {
        margin-top: 25px;
    }
    .user {
        display: inline-block;
        border: solid black 1px;
        border-radius: 15px;
        margin: 25px;
        padding: 10px;
        height: 150px;
        width: 350px;
    }
    .tag {
        display: inline-block;
        border: solid black 2px;
        box-shadow: 3px 3px black;
        padding-left: 2px;
        padding-right: 2px;
        margin: 2px;
    }
    #avatar {
        margin-right: 10px;
        width: 50px;
        height: 50px;
    }

    #search>div {
        display: inline-block;
        padding: 1px;
        border: solid 2px;
        border-right: none;
        border-color: darkgrey whitesmoke whitesmoke darkgrey;
        border-top-left-radius: 15px;
        border-bottom-left-radius: 15px;
    }
    #search>input {
        width: 400px;
        border-left: none;
        border-top-right-radius: 15px;
        border-bottom-right-radius: 15px;
    }
</style>

<div class="row">
    <div class="col-md-6"><h1>Users</h1></div>
    <div class="col-md-6">réputation | nouveaux | moderateurs | administrateurs </div>
</div>

<hr/>

<div id="search"><div><span class="glyphicon glyphicon-search"></span></div><input id="search-bar" type="text" placeholder="Saissez un nom de membre, un lieu ou une compétence"></div>

<div class="user-list row">
    <div class="user" v-for="user in users">
        <div class="row">
            <div class="col-md-4" id="avatar"><img src="https://placehold.it/50x50" alt="avatar"></div>
            <div class="col-md-8">
                <div class="row">
                    <div class="col-md-6">{{user.FirstName}} {{user.LastName}}</div>
                    <div class="col-md-2">{{user.Location}}</div>
                </div>
                <div class="row">
                    <div class="col-md-6"><i>{{user.Description}}</i></div>
                    <div class="col-md-6">{{user.VReputation}} vR</div>
                </div>
                <div>
                    <div class="tag" v-for="tag in user.Tags">
                        {{tag.Name}}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<button onclick="loadUsers()">Refresh</button>

<script type="text/javascript">
    $(function () {
        Vue.config.debug = true;

        function loadUsers() {
            $.ajax({
                url: 'http://localhost:1618/users',
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                crossDomain: true,
                success: function (res) {
                    console.log(res);
                    new Vue({
                        el: '.user',
                        data: {
                            users: res
                        },
                        computed: {
                            filtered: function () {
                                var search = $('#search-bar').val();
                                console.log(search);
                                return this.users.filter(function (user) {
                                    Object.keys(user).find(function (e, _) {
                                        true//user[e].contains(search);
                                    });
                                })
                            }
                        },
                        debug: true
                    });
                },
                error: function (jqXHR, status, error) {
                    console.error(error);
                }
            });
        }

        loadUsers();
    });
</script>